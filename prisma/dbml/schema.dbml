//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  type String [not null]
  name String [not null]
  last_name String [not null]
  phone String
  birthday DateTime
  email String [unique, not null]
  password String [not null]
  sex String [not null]
  address String
  curp String [unique]
  doctors Doctor [not null]
  employees Employee [not null]
  clients Client [not null]
  appointments Appointment [not null]
  administrators Administrator [not null]
  documents Document [not null]
  photos Photo [not null]
}

Table Doctor {
  id Int [pk, increment]
  study_degree String [not null]
  license String [not null]
  schedule_start DateTime
  schedule_end DateTime
  user_fk Int [unique, not null]
  user User [not null]
  clinics DoctorClinic [not null]
  services DoctorService [not null]
}

Table Employee {
  id Int [pk, increment]
  study_degree String [not null]
  schedule_start DateTime
  schedule_end DateTime
  role String [not null]
  user_fk Int [unique, not null]
  user User [not null]
  clinics EmployeeClinic [not null]
  services EmployeeService [not null]
}

Table EmployeeService {
  employee_fk Int [not null]
  service_fk Int [not null]
  employee Employee [not null]
  service Service [not null]

  indexes {
    (employee_fk, service_fk) [pk]
  }
}

Table DoctorService {
  doctor_fk Int [not null]
  service_fk Int [not null]
  doctor Doctor [not null]
  service Service [not null]

  indexes {
    (doctor_fk, service_fk) [pk]
  }
}

Table Service {
  id Int [pk, increment]
  name String [unique, not null]
  doctors DoctorService [not null]
  employees EmployeeService [not null]
}

Table Client {
  id Int [pk, increment]
  allergies String
  emergency_number String
  health_problems String
  user_fk Int [unique, not null]
  user User [not null]
  payments Payment [not null]
  debts Debt [not null]
  appointments Appointment [not null]
}

Table Payment {
  id Int [pk, increment]
  date DateTime [not null]
  ammount Float [not null]
  description String [not null]
  client_fk Int [not null]
  client Client [not null]
}

Table Document {
  id Int [pk, increment]
  type String [not null]
  file String [not null]
  user_fk Int [not null]
  user User [not null]
}

Table Photo {
  id Int [pk, increment]
  type String [not null]
  image String [not null]
  user_fk Int [not null]
  user User [not null]
}

Table Debt {
  id Int [pk, increment]
  date DateTime [not null]
  ammount Float [not null]
  paid Boolean [not null]
  description String [not null]
  client_fk Int [not null]
  client Client [not null]
}

Table Clinic {
  id Int [pk, increment]
  name String [not null]
  phone String [not null]
  opening_times String [not null]
  address String [not null]
  building_number Int [not null]
  doctors DoctorClinic [not null]
  employees EmployeeClinic [not null]
  administrators Administrator [not null]
  notifications Notification [not null]
}

Table DoctorClinic {
  doctor_fk Int [not null]
  clinic_fk Int [not null]
  doctor Doctor [not null]
  clinic Clinic [not null]

  indexes {
    (doctor_fk, clinic_fk) [pk]
  }
}

Table EmployeeClinic {
  employee_fk Int [not null]
  clinic_fk Int [not null]
  employee Employee [not null]
  clinic Clinic [not null]

  indexes {
    (employee_fk, clinic_fk) [pk]
  }
}

Table Administrator {
  user_fk Int [not null]
  clinic_fk Int [not null]
  user User [not null]
  clinic Clinic [not null]

  indexes {
    (user_fk, clinic_fk) [pk]
  }
}

Table Appointment {
  id Int [pk, increment]
  client_fk Int [not null]
  in_charge_fk Int [not null]
  type String [not null]
  date DateTime [not null]
  hour DateTime [not null]
  subject String [not null]
  status String [not null, default: 'CONFIRMATION PENDING']
  client Client [not null]
  in_charge User [not null]
  notification Notification [not null]
}

Table Notification {
  id Int [pk, increment]
  clinic_fk Int [not null]
  appointment_fk Int [not null]
  clinic Clinic [not null]
  cita Appointment [not null]
}

Ref: Doctor.user_fk > User.id

Ref: Employee.user_fk > User.id

Ref: EmployeeService.employee_fk > Employee.id

Ref: EmployeeService.service_fk > Service.id

Ref: DoctorService.doctor_fk > Doctor.id

Ref: DoctorService.service_fk > Service.id

Ref: Client.user_fk > User.id

Ref: Payment.client_fk > Client.id

Ref: Document.user_fk > User.id

Ref: Photo.user_fk > User.id

Ref: Debt.client_fk > Client.id

Ref: DoctorClinic.doctor_fk > Doctor.id

Ref: DoctorClinic.clinic_fk > Clinic.id

Ref: EmployeeClinic.employee_fk > Employee.id

Ref: EmployeeClinic.clinic_fk > Clinic.id

Ref: Administrator.user_fk > User.id

Ref: Administrator.clinic_fk > Clinic.id

Ref: Appointment.client_fk > Client.id

Ref: Appointment.in_charge_fk > User.id

Ref: Notification.clinic_fk > Clinic.id

Ref: Notification.appointment_fk > Appointment.id